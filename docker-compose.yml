services:
  gambit:
    build:
      context: .
    container_name: gambit
    ports:
      - "8501:8501"
    volumes:
      - ./:/app
      - ./gambit_out:/gambit/gambit_out
    environment:
      GAMBIT_OUT: /gambit/gambit_out
      STREAMLIT_SERVER_ADDRESS: 0.0.0.0
      STREAMLIT_SERVER_PORT: 8501
      STREAMLIT_THEME_BASE: dark
      STREAMLIT_THEME_PRIMARY_COLOR: "#7C3AED"
      STREAMLIT_SERVER_FILE_WATCHER_TYPE: poll
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-fsS", "http://127.0.0.1:8501/_stcore/health"]
      interval: 10s
      timeout: 3s
      retries: 10
